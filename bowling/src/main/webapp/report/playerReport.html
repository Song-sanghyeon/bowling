<!doctype html>
<html class="no-js" lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<title>Player Report</title>
<style>
	#getTeam {
		position:relative;
		right:10px;
	}
	
	#strikeAvgChart{
		display:inline-block;
	}
	
	#pinAvgChart{
		position:relative;
		left:150px;
		display:inline-block;
	}
	
	#winChart{
		position:relative;
		left:300px;
		display:inline-block;
	}
</style>
<meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- favicon
		============================================ -->
<link rel="shortcut icon" type="image/x-icon" href="/img/favicon.ico">
<!-- Google Fonts
		============================================ -->
<link
	href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,700,900"
	rel="stylesheet">
<!-- Bootstrap CSS
		============================================ -->
<link rel="stylesheet" href="/css/bootstrap.min.css">
<!-- Bootstrap CSS
		============================================ -->
<link rel="stylesheet" href="/css/font-awesome.min.css">
<!-- owl.carousel CSS
		============================================ -->
<link rel="stylesheet" href="/css/owl.carousel.css">
<link rel="stylesheet" href="/css/owl.theme.css">
<link rel="stylesheet" href="/css/owl.transitions.css">
<!-- animate CSS
		============================================ -->
<link rel="stylesheet" href="/css/animate.css">
<!-- normalize CSS
		============================================ -->
<link rel="stylesheet" href="/css/normalize.css">
<!-- meanmenu icon CSS
		============================================ -->
<link rel="stylesheet" href="/css/meanmenu.min.css">
<!-- main CSS
		============================================ -->
<link rel="stylesheet" href="/css/main.css">
<!-- educate icon CSS
		============================================ -->
<link rel="stylesheet" href="/css/educate-custon-icon.css">
<!-- morrisjs CSS
		============================================ -->
<link rel="stylesheet" href="/css/morrisjs/morris.css">
<!-- mCustomScrollbar CSS
		============================================ -->
<link rel="stylesheet"
	href="/css/scrollbar/jquery.mCustomScrollbar.min.css">
<!-- metisMenu CSS
		============================================ -->
<link rel="stylesheet" href="/css/metisMenu/metisMenu.min.css">
<link rel="stylesheet" href="/css/metisMenu/metisMenu-vertical.css">
<!-- calendar CSS
		============================================ -->
<link rel="stylesheet" href="/css/calendar/fullcalendar.min.css">
<link rel="stylesheet" href="/css/calendar/fullcalendar.print.min.css">
<!-- style CSS
		============================================ -->
<link rel="stylesheet" href="/style.css">
<!-- responsive CSS
		============================================ -->
<link rel="stylesheet" href="/css/responsive.css">
<!-- modernizr JS
		============================================ -->
<link rel="stylesheet" href="/css/data-table/bootstrap-table.css">
<link rel="stylesheet" href="/css/data-table/bootstrap-editable.css">

<script src="/js/vendor/modernizr-2.8.3.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
</head>

<body>

	<!-- ### Left Menu Start 건드리지 마세요 ################################################################################################################################################################# -->
	<div class="left-sidebar-pro">
		<nav id="sidebar" class="">
			<div class="sidebar-header">
				<a href="/index.html"><img class="main-logo"
					src="/img/logo/logo.png" alt="" /></a> <strong><a
					href="/index.html"><img src="/img/logo/logosn.png" alt="" /></a></strong>
			</div>
			<div class="left-custom-menu-adp-wrap comment-scrollbar">
				<nav class="sidebar-nav left-sidebar-menu-pro">
					<ul class="metismenu" id="menu1">
						<li><a href="/index.html" aria-expanded="false"> <span
								class="educate-icon educate-home icon-wrap"></span> <span
								class="mini-click-non">홈</span>
						</a></li>
						
						 <li>
                            <a href="/news.html" aria-expanded="false"><span class="educate-icon educate-library icon-wrap"></span> <span class="mini-click-non">뉴스</span></a>
                        </li>
						
						<li>
                            <a class="has-arrow" href="#" aria-expanded="false"><span class="educate-icon educate-data-table icon-wrap"></span> <span class="mini-click-non">정보</span></a>
                            <ul class="submenu-angle" aria-expanded="false">
                                <li><a title="Peity Charts" href="/teamInformation.html"><span class="mini-sub-pro">팀정보</span></a></li>
                                <li><a title="Data Table" href="/playerInformation.html"><span class="mini-sub-pro">선수정보</span></a></li>
                            </ul>
                        </li>
						
						<li>
                            <a class="has-arrow" href="/all-students.html" aria-expanded="false"><span class="educate-icon educate-student icon-wrap"></span> <span class="mini-click-non">기록/순위</span></a>
                            <ul class="submenu-angle" aria-expanded="false">
                                <li><a title="All Students" href="/teamReport.html"><span class="mini-sub-pro">팀 기록</span></a></li>
                                <li><a title="Add Students" href="/teamRanking.html"><span class="mini-sub-pro">팀 순위</span></a></li>
                                <li><a title="Edit Students" href="/playerReport.html"><span class="mini-sub-pro">선수 기록</span></a></li>
                                <li><a title="Students Profile" href="/playerRanking.html"><span class="mini-sub-pro">선수 순위</span></a></li>
                            </ul>
                        </li>
						
						<li>
                            <a href="/schedule.html" aria-expanded="false"><span class="educate-icon educate-event icon-wrap sub-icon-mg" aria-hidden="true"></span> <span class="mini-click-non">일정/결과</span></a>
                        </li>
						
						<li>
                            <a  href="/stat.html" aria-expanded="false"><span class="educate-icon educate-charts icon-wrap"></span> <span class="mini-click-non">통계</span></a>
                        </li>

					</ul>
				</nav>
			</div>
		</nav>
	</div>
	<!-- ### Left Menu END 건드리지 마세요 ################################################################################################################################################################# -->
	
	<!-- ### Top Menu Start 여기부터 건드리지 마세요 ########################################################################################################################################################################### -->
    <div class="all-content-wrapper">
        <div class="container-fluid">
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <div class="logo-pro">
                        <a href="/index.html"><img class="main-logo" src="/img/logo/logo.png" alt="" /></a>
                    </div>
                </div>
            </div>
        </div>
        <div class="header-advance-area">
            <div class="header-top-area">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                            <div class="header-top-wraper">
                                <div class="row">
                                    <div class="col-lg-1 col-md-0 col-sm-1 col-xs-12">
                                        <div class="menu-switcher-pro">
                                            <button type="button" id="sidebarCollapse" class="btn bar-button-pro header-drl-controller-btn btn-info navbar-btn">
													<i class="educate-icon educate-nav"></i>
												</button>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-md-7 col-sm-6 col-xs-12">
                                        <div class="header-top-menu tabl-d-n">
                                            <ul class="nav navbar-nav mai-top-nav">
                                                <li class="nav-item"><a href="/index.html" class="nav-link">Home</a>
                                                </li>
                                                <li class="nav-item"><a href="/news.html" class="nav-link">News</a>
                                                </li>
                                                <li class="nav-item dropdown res-dis-nn">
                                                    <a href="#" data-toggle="dropdown" role="button" aria-expanded="false" class="nav-link dropdown-toggle">Information <span class="angle-down-topmenu"><i class="fa fa-angle-down"></i></span></a>
                                                    <div role="menu" class="dropdown-menu animated zoomIn">
                                                        <a href="/teamInformation.html" class="dropdown-item">Team Information</a>
                                                        <a href="/playerInformation.html" class="dropdown-item">Player Information</a>
                                                    </div>
                                                </li>
                                                <li class="nav-item dropdown res-dis-nn">
                                                    <a href="#" data-toggle="dropdown" role="button" aria-expanded="false" class="nav-link dropdown-toggle">Report & Ranking<span class="angle-down-topmenu"><i class="fa fa-angle-down"></i></span></a>
                                                    <div role="menu" class="dropdown-menu animated zoomIn">
                                                        <a href="/teamReport.html" class="dropdown-item">Team Report</a>
                                                        <a href="/playerReport.html" class="dropdown-item">Player Report</a>
                                                        <a href="/teamRanking.html" class="dropdown-item">Team Ranking</a>
                                                        <a href="/playerRanking.html" class="dropdown-item">Player Ranking</a>
                                                    </div>
                                                </li>
                                                <li class="nav-item"><a href="/schedule.html" class="nav-link">Schedule</a>
                                                </li>
                                                <li class="nav-item"><a href="/.html" class="nav-link">Stat</a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="col-lg-5 col-md-5 col-sm-12 col-xs-12">
                                        <div class="header-right-info">
                                            <ul class="nav navbar-nav mai-top-nav header-right-menu">
                                                <li class="nav-item dropdown">
                                                    <a href="#" data-toggle="dropdown" role="button" aria-expanded="false" class="nav-link dropdown-toggle"><i class="educate-icon educate-message edu-chat-pro" aria-hidden="true"></i><span class="indicator-ms"></span></a>
                                                    <div role="menu" class="author-message-top dropdown-menu animated zoomIn">
                                                        <div class="message-single-top">
                                                            <h1>Message</h1>
                                                        </div>
                                                        <ul class="message-menu">
                                                            <li>
                                                                <a href="#">
                                                                    <div class="message-img">
                                                                        <img src="img/contact/1.jpg" alt="">
                                                                    </div>
                                                                </a>
                                                            </li>
                                                        </ul>
                                                        <div class="message-view">
                                                            <a href="#">수신받은 메세지가 없습니다</a>
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="nav-item"><a href="#" data-toggle="dropdown" role="button" aria-expanded="false" class="nav-link dropdown-toggle"><i class="educate-icon educate-bell" aria-hidden="true"></i><span class="indicator-nt"></span></a>
                                                    <div role="menu" class="notification-author dropdown-menu animated zoomIn">
                                                        <div class="notification-single-top">
                                                            <h1>Notifications</h1>
                                                        </div>
                                                        <ul class="notification-menu">
                                                        </ul>
                                                        <div class="notification-view">
                                                            <a href="#">새로운 알림이 없습니다</a>
                                                        </div>
                                                    </div>
                                                </li>
                                                <li class="nav-item">
                                                    <a href="#" data-toggle="dropdown" role="button" aria-expanded="false" class="nav-link dropdown-toggle">
															<img src="img/product/pro4.jpg" alt="" />
															<span class="admin-name">My Page</span>
															<i class="fa fa-angle-down edu-icon edu-down-arrow"></i>
														</a>
                                                    <ul role="menu" class="dropdown-header-top author-log dropdown-menu animated zoomIn">
                                                        <li><a href="#"><span id="login" class="edu-icon edu-locked author-log-ic"></span>Log In</a>
                                                        </li>
                                                        <li><a href="#"><span id="logOut" class="edu-icon edu-locked author-log-ic"></span>Log Out</a>
                                                        </li>
                                                    </ul>
                                                </li>
                                                <li class="nav-item nav-setting-open"><a href="#" data-toggle="dropdown" role="button" aria-expanded="false" class="nav-link dropdown-toggle"><i class="educate-icon educate-menu"></i></a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
	<!-- ### Top Menu End 여기까지 건드리지 마세요 ########################################################################################################################################################################### -->
	
	<!-- ### Content Start 내용 ######################################################################################################################################################################################### -->
            <div class="breadcome-area">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                            <div class="breadcome-list single-page-breadcome">
                                <div class="row">
                                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                        <div class="breadcome-heading">
                                            <form role="search" class="sr-input-func">
                                                <div>
                                                	<h1><span id="getTeamName">개인 기록</span></h1>
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                        <ul class="breadcome-menu">
                                            <li><a href="#">Home</a> <span class="bread-slash">/</span>
                                            </li>
                                            <li><span class="bread-blod" id="getTeamName2">개인 기록</span>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Static Table Start -->
        <div class="data-table-area mg-b-15">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <div class="sparkline13-list">
                            <div class="sparkline13-hd">
                                <div class="main-sparkline13-hd">
                                </div>
                            </div>
                            <div class="sparkline13-graph">
                                <div class="datatable-dashv1-list custom-datatable-overright">
                                    <div id="toolbar">
                                    	<table>
                                    		<tr>
                                    			<td>
			                                    	<!-- 팀 선택 -->
			                                        <select id="getTeam" class="form-control dt-tb">
														<option value="0">팀 선택</option>
													</select>
                                    			</td>
                                    			<td>
                                    				<button class="btn btn-default" id="getTeamPlayerBtn">조회</button>
                                    			</td>
                                    		</tr>
                                    	</table>
                                    </div>
                                    <table id="table" data-toggle="table" data-pagination="true" data-search="true" data-show-columns="true" data-show-pagination-switch="true" data-show-refresh="true" data-key-events="true" data-show-toggle="true" data-resizable="true" data-cookie="true"
					                                        data-cookie-id-table="saveId" data-show-export="true" data-click-to-select="true" data-toolbar="#toolbar">
									<thead>
										<tr>
											<th>이름</th>
											<th>성별</th>
											<th>게임수</th>
											<th>승</th>
											<th>무</th>
											<th>패</th>
											<th>승률</th>
											<th>평균점수</th>
											<th>평균스트라이크</th>
											<th>상세보기</th>
										</tr>
									</thead>
									<tbody id="getTeamPlayer">
										
									</tbody>
								</table>
                                    <br><hr>
                                   <canvas id="myChart" width="400" height="400"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- ### Content End 내용 ######################################################################################################################################################################################### -->
        
        <!-- ### Copyright Start 카피라이터 건드리지마세요 #############################################################################################################################################################################-->
        <div class="footer-copyright-area">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <div class="footer-copy-right">
                            <p>Copyright © 2018. All rights reserved. Template by <a href="https://colorlib.com/wp/templates/">Colorlib</a></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- ### Copyright End 카피라이터 건드리지마세요 #############################################################################################################################################################################-->
   
    </div>

	<!-- jquery
		============================================ -->
	<script src="/js/vendor/jquery-1.12.4.min.js"></script>
	<!-- bootstrap JS
		============================================ -->
	<script src="/js/bootstrap.min.js"></script>
	<!-- wow JS
		============================================ -->
	<script src="/js/wow.min.js"></script>
	<!-- price-slider JS
		============================================ -->
	<script src="/js/jquery-price-slider.js"></script>
	<!-- meanmenu JS
		============================================ -->
	<script src="/js/jquery.meanmenu.js"></script>
	<!-- owl.carousel JS
		============================================ -->
	<script src="/js/owl.carousel.min.js"></script>
	<!-- sticky JS
		============================================ -->
	<script src="/js/jquery.sticky.js"></script>
	<!-- scrollUp JS
		============================================ -->
	<script src="/js/jquery.scrollUp.min.js"></script>
	<!-- counterup JS
		============================================ -->
	<script src="/js/counterup/jquery.counterup.min.js"></script>
	<script src="/js/counterup/waypoints.min.js"></script>
	<script src="/js/counterup/counterup-active.js"></script>
	<!-- mCustomScrollbar JS
		============================================ -->
	<script src="/js/scrollbar/jquery.mCustomScrollbar.concat.min.js"></script>
	<script src="/js/scrollbar/mCustomScrollbar-active.js"></script>
	<!-- metisMenu JS
		============================================ -->
	<script src="/js/metisMenu/metisMenu.min.js"></script>
	<script src="/js/metisMenu/metisMenu-active.js"></script>
	<!-- morrisjs JS
		============================================ -->
	<script src="/js/morrisjs/raphael-min.js"></script>
	<script src="/js/morrisjs/morris.js"></script>
	<script src="/js/morrisjs/morris-active.js"></script>
	<!-- morrisjs JS
		============================================ -->
	<script src="/js/sparkline/jquery.sparkline.min.js"></script>
	<script src="/js/sparkline/jquery.charts-sparkline.js"></script>
	<script src="/js/sparkline/sparkline-active.js"></script>
	<!-- calendar JS
		============================================ -->
	<script src="/js/calendar/moment.min.js"></script>
	<script src="/js/calendar/fullcalendar.min.js"></script>
	<script src="/js/calendar/fullcalendar-active.js"></script>
	<!-- plugins JS
		============================================ -->
	<script src="/js/plugins.js"></script>
	<!-- main JS
		============================================ -->
	<script src="/js/main.js"></script>
    <!-- data table JS
		============================================ -->
    <script src="/js/data-table/bootstrap-table.js"></script>
    <script src="/js/data-table/tableExport.js"></script>
    <script src="/js/data-table/data-table-active.js"></script>
    <script src="/js/data-table/bootstrap-table-editable.js"></script>
    <script src="/js/data-table/bootstrap-editable.js"></script>
    <script src="/js/data-table/bootstrap-table-resizable.js"></script>
    <script src="/js/data-table/colResizable-1.5.source.js"></script>
    <script src="/js/data-table/bootstrap-table-export.js"></script>

</body>

<script>
	$(document).ready(function(){
		
		// 팀의 속한 선수의 이름을 저장할 배열
		let teamPlayerNameArray = [];
		// 각 성수의 평균 스트라이크를 저장할 배열
		let teamStrikeAvgArray = [];
		let returnChart=0;
		
		//팀 목록을 불러온다.
		$.ajax({
			url:"/getTeam",
			method:"POST",
			success:function(json){
				//console.log("팀 목록 불러오기");
				$(json).each(function(index, item){
					temp = "<option value='";
					temp += item.teamName;
					temp += "'>";
					temp += item.teamName;
					temp += "</option>";
					$("#getTeam").append(temp);
				});
			}		
		});
		
		// 해당 팀의 기록을 불러오는 함수
		$("#getTeamPlayerBtn").on("click",function(){
			
			// 팀 선택시 실행
			if($("#getTeam option:selected").val() != 0){
				
				$("#teamReport").empty();
				
				// 해당 팀에 소속된 선수와 선수의 기록울 가져온다.
				$.ajax({
					url: "/getTeamPlayer",
					method: "POST",
					data: {"teamName" : $("#getTeam option:selected").val()},
					success: function(json){
						console.log("선수 데이터 불러오기!");
						$("#getTeamPlayer").empty();
						$(json).each(function(index, item){
							temp = "<tr>";
							temp +="<td>"+item.playerName+"</td>";
							temp +="<td>"+item.gender+"</td>";
							temp +="<td>"+item.matchGame+"</td>";
							temp +="<td>"+item.win+"</td>";
							temp +="<td>"+item.draw+"</td>";
							temp +="<td>"+item.lose+"</td>";
							temp +="<td>"+item.winRate+"</td>";
							temp +="<td>"+item.scoreAvg+"</td>";
							temp +="<td>"+item.strikeAvg+"</td>";
							temp +="<td><button type='button' class='chart' value="+item.playerNo+">상세보기</td>";
							temp +="</tr>";
							$("#getTeamPlayer").append(temp);
							
						});
						
						$(".chart").click(function(){
							console.log($(this).val()+"버튼 클릭");
							
							if(returnChart != 0){
								console.log("return chart");
								myChart.destroy();
							} else {
								console.log("first chart");
								returnChart = 1;
							}
							
							// 해당 팀의 평균 스트라이크를 불러오는 함수
							$.ajax({
								url:"/getStrike",
								method:"POST",
								data:{"playerNo":$(".chart").val()},
								success:function(json){
									 console.log("json : ", json);
									$(json).each(function(index, item){
										teamPlayerNameArray[index] = item.playerName;
										teamStrikeAvgArray[index] = item.strike;
									});
									
									// 차트 그리는 함수에 해당하는 데이터를 저장하여 함수 실행
									strikeChartDraw(teamPlayerNameArray, teamStrikeAvgArray);
								}
							});
							
						});
						
					}
				});
				
				
			} else {
				// 팀을 선택하지 않은 경우 경고 메세지 출력
				alert("팀을 선택해주세요 !");
			}

		});
	});
	
// ### 평균 스트라이크 차트 생성 START ###############################################################################################
	
	let strikeChartDraw = function(teamPlayerNameArray, teamStrikeAvgArray){
		
		console.log("strikeChartDraw function success!"); // 확인
		
		let ctx = document.getElementById('myChart'); // 차트 생성
		
		myChart = new Chart(ctx, {
			type: 'pie', // 타입
			data: {
				labels: teamPlayerNameArray, // x축 (가로) 데이터
				datasets: [{
					label: '평균 스트라이크',
					data: teamStrikeAvgArray, // y축 (세로) 데이터
		// ### 색 옵션 건드리지 마세요 ###############################################################################################################################################################
					backgroundColor: [
						'rgba(255, 99, 132, 0.2)',
						'rgba(54, 162, 235, 0.2)',
						'rgba(255, 206, 86, 0.2)',
						'rgba(75, 192, 192, 0.2)',
						'rgba(153, 102, 255, 0.2)',
						'rgba(255, 159, 64, 0.2)',
						'rgba(27, 27, 27, 0.2)',
						'rgba(233, 177, 199, 0.2)',
						'rgba(255, 255, 255, 0.2)',
						'rgba(117, 140, 120, 0.2)'
					],
					borderColor: [
						'rgba(255, 99, 132, 1)',
						'rgba(54, 162, 235, 1)',
						'rgba(255, 206, 86, 1)',
						'rgba(75, 192, 192, 1)',
						'rgba(153, 102, 255, 1)',
						'rgba(255, 159, 64, 1)',
						'rgba(27, 27, 27, 0.5)',
						'rgba(255, 227, 226, 1)',
						'rgba(25, 25, 25, 0.5)',
						'rgba(117, 140, 120, 1)'
					],
		// ### 색 옵션 건드리지 마세요 ###############################################################################################################################################################
					borderWidth: 1
				}]
			},
			options: {
				responsive: false,
				scales: {
					yAxes: [{
						ticks: {
							beginAtZero: true
						}
					}]
				},
			}
		});
		
		$("#strikeAvgChart").append(ctx); // 해당 위치에 그래프 추가
	}
	
	// ### 평균 스트라이크 차트 생성 END ###############################################################################################
	
</script>
</html>